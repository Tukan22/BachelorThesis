# max_possible_date_diff = 21
# forecast_start_date = as.Date("2019-05-24")
plot(ARMAGARCH_fc_e[[stockn]])
ARMAGARCH_fc_e[[stockn]]
stockn
stockn =  "AAPL"
plot(ARMAGARCH_fc_e[[stockn]])
stockn =  "AAPL"
lines(ARMAGARCH_fc_r[[stockn]])
plot(ARMAGARCH_fc_r[[stockn]])
plot(ARMAGARCH_fc_e[[stockn]])
allstocks[[stockn]]$RV
library(stringr)
library(arrow)
library(xts)
library(graphics)
library(RColorBrewer)
library(ggplot2)
library(tseries)
library(dplyr)
library(aod)
library(stargazer)
library(xtable)
library(stats)
library(zoo)
library(forecast)
library(rugarch)
library(xts)
library(highfrequency)
library(fitdistrplus)
library(MASS)
library(mosaic)
library(segMGarch)
library(GAS)
##############################
### READING FROM PARQUET   ###
###    Not necessary if    ###
### .RData files available ###
##############################
# #read all filenames
# stocks = as.data.frame(list.files("Data/parquet"))
# #create stock names from file names
# names(stocks) = "filename"
# stocks$stockname = substr(stocks$filename, 4, nchar(stocks$filename))
# # head(stocks)
# allstocks = list()
# for(i in seq(1,nrow(stocks))){
#  # read file
#  allstocks[[stocks[i,"stockname"]]] =as.xts(read_parquet(paste("Data/parquet/", stocks[i,"filename"], sep="")))
#  # print(sum(is.na(allstocks[[stocks[i,"stockname"]]])))
#  # check if No Na's are present
#  stocks$NoNas[i] = sum(is.na(allstocks[[stocks[i,"stockname"]]])) == 0
#  # compute returns
#  allstocks[[stocks[i,"stockname"]]]$ret = diff(allstocks[[stocks[i,"stockname"]]][,"close_price"])/lag(allstocks[[stocks[i,"stockname"]]][,"close_price"])
#  # reorganize  columns
#  allstocks[[stocks[i,"stockname"]]] = allstocks[[stocks[i,"stockname"]]][,c(7,2,3,4,5,6,1)]
#  allstocks[[stocks[i,"stockname"]]] = allstocks[[stocks[i,"stockname"]]][-1,]
#}
for(filename in setdiff(list.files("Data"), list.dirs("Data", recursive = FALSE, full.names = FALSE))){
load(paste("Data/", filename, sep = ""))
}
# Model parameters - loaded from data
# minimum_length = 1000
# pre_covid_end_date = as.Date("2019-05-24")
# n_for = 66
# max_possible_date_diff = 21
# forecast_start_date = as.Date("2019-05-24")
library(stringr)
library(arrow)
library(xts)
library(graphics)
library(RColorBrewer)
library(ggplot2)
library(tseries)
library(dplyr)
library(aod)
library(stargazer)
library(xtable)
library(stats)
library(zoo)
library(forecast)
library(rugarch)
library(xts)
library(highfrequency)
library(fitdistrplus)
library(MASS)
library(mosaic)
library(segMGarch)
library(GAS)
##############################
### READING FROM PARQUET   ###
###    Not necessary if    ###
### .RData files available ###
##############################
# #read all filenames
# stocks = as.data.frame(list.files("Data/parquet"))
# #create stock names from file names
# names(stocks) = "filename"
# stocks$stockname = substr(stocks$filename, 4, nchar(stocks$filename))
# # head(stocks)
# allstocks = list()
# for(i in seq(1,nrow(stocks))){
#  # read file
#  allstocks[[stocks[i,"stockname"]]] =as.xts(read_parquet(paste("Data/parquet/", stocks[i,"filename"], sep="")))
#  # print(sum(is.na(allstocks[[stocks[i,"stockname"]]])))
#  # check if No Na's are present
#  stocks$NoNas[i] = sum(is.na(allstocks[[stocks[i,"stockname"]]])) == 0
#  # compute returns
#  allstocks[[stocks[i,"stockname"]]]$ret = diff(allstocks[[stocks[i,"stockname"]]][,"close_price"])/lag(allstocks[[stocks[i,"stockname"]]][,"close_price"])
#  # reorganize  columns
#  allstocks[[stocks[i,"stockname"]]] = allstocks[[stocks[i,"stockname"]]][,c(7,2,3,4,5,6,1)]
#  allstocks[[stocks[i,"stockname"]]] = allstocks[[stocks[i,"stockname"]]][-1,]
#}
for(filename in setdiff(list.files("Data"), list.dirs("Data", recursive = FALSE, full.names = FALSE))){
load(paste("Data/", filename, sep = ""))
}
# Model parameters - loaded from data
# minimum_length = 1000
# pre_covid_end_date = as.Date("2019-05-24")
# n_for = 66
# max_possible_date_diff = 21
# forecast_start_date = as.Date("2019-05-24")
plot(ARMAGARCH_fc_e[[stockn]])
ARMAGARCH_fc_e
ARMAGARCH_fc_e[[stockn]]
stockn =  "AAPL"
ARMAGARCH_fc_e[[stockn]]
ARMAGARCH_fc_e[[stockn]]
plot(ARMAGARCH_fc_e[[stockn]])
lines(allstocks[[stockn]]$RV)
plot(ARMAGARCH_fc_e[[stockn]])
lines(allstocks[[stockn]]$RV)
plot(ARMAGARCH_fc_e[[stockn]])
lines(allstocks[[stockn]]$RV)
plot(allstocks[[stockn]]$RV)
plot(allstocks[[stockn]]$RV)
plot(ARMAGARCH_fc_e[[stockn]])
plot(allstocks[[stockn]]$RV)
plot(ARMAGARCH_fc_e[[stockn]])
plot(sqrt(allstocks[[stockn]]$RV))
plot(ARMAGARCH_fc_e[[stockn]])
plot(ARMAGARCH_fc_e[[stockn]], col = "red")
plot(sqrt(allstocks[[stockn]]$RV))
plot(allstocks[[stockn]]$RV)
plot(ARMAGARCH_fc_e[[stockn]], col = "red")
plot(allstocks[[stockn]]$RV)
lines(ARMAGARCH_fc_e[[stockn]], col = "red")
plot(sqrt(allstocks[[stockn]]$RV))
lines(ARMAGARCH_fc_e[[stockn]], col = "red")
plot(sqrt(allstocks[[stockn]]$RV))
lines(ARMAGARCH_fc_e[[stockn]], col = "red")
plot(ARMAGARCH_fc_e[[stockn]])
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
plot(ARMAGARCH_fc_e[[stockn]])
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "green")
plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2))
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "green")
plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "black")
plot(allstocks[[stockn]]$ret, ylim = c(-0.2, 0.2), col = "black")
plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
plot(allstocks[[stockn]]$ret, ylim = c(-0.2, 0.2), col = "black")
plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "black")
legend("topleft", legend = c("Ljung-Box p-stat","0.05"), col = c("blue","red"), lty = c(1,2), lwd = 1)
plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "black")
legend("topleft", legend = c("Ljung-Box p-stat","0.05"), col = c("blue","red"), lty = c(1,2), lwd = 1)
addLegend("topleft", on=1,
legend.names = c("SPY", "IWM"),
lty=c(1, 1), lwd=c(2, 1),
col=c("black", "blue"))
plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "black")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("black", "green","red"))
plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green", grid.col = NA)
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "black")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("black", "green","red"))
plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "black")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("black", "green","red"))
for(stockn in stocks$stockname){
plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "black")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("black", "green","red"))
}
for(stockn in stocks$stockname){
plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "black")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("black", "green","red"))
}
for(stockn in stocks$stockname){
print(stockn)
plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "black")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("black", "green","red"))
}
dev.off()
dev.off()
for(stockn in stocks$stockname){
print(stockn)
plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "black")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("black", "green","red"))
}
for(stockn in stocks$stockname){
print(plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green"))
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "black")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("black", "green","red"))
}
for(stockn in stocks$stockname){
print(
plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
for(stockn in stocks$stockname){
print(plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green"))
print(lines(sqrt(allstocks[[stockn]]$RV), col = "red"))
print(lines(allstocks[[stockn]]$ret, col = "black"))
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("black", "green","red"))
}
for(stockn in stocks$stockname){
print(plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green"))
print(lines(sqrt(allstocks[[stockn]]$RV), col = "red"))
print(lines(allstocks[[stockn]]$ret, col = "black"))
print(addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("black", "green","red")))
}
for(stockn in stocks$stockname){
print(plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green", main = stockn))
print(lines(sqrt(allstocks[[stockn]]$RV), col = "red"))
print(lines(allstocks[[stockn]]$ret, col = "black"))
print(addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("black", "green","red")))
}
AR1_RV_fc_r_something=list()
print(addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("black", "green","red")))
for(stockn in stocks$stockname){
myplot = plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green", main = stockn)
print(myplot)
print(lines4(sqrt(allstocks[[stockn]]$RV), col = "red"))
print(lines(allstocks[[stockn]]$ret, col = "black"))
print(addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("black", "green","red")))
}
for(stockn in stocks$stockname){
myplot = plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green", main = stockn)
print(myplot)
#  print(lines4(sqrt(allstocks[[stockn]]$RV), col = "red"))
#  print(lines(allstocks[[stockn]]$ret, col = "black"))
#  print(addLegend("topleft", on=1,
#          legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
#          lty=c(1, 1, 1), lwd=c(2, 2, 2),
#          col=c("black", "green","red")))
}
for(stockn in stocks$stockname){
myplot = plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green", main = stockn)
print(myplot)
lines4(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "black")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("black", "green","red"))
#  print(lines4(sqrt(allstocks[[stockn]]$RV), col = "red"))
#  print(lines(allstocks[[stockn]]$ret, col = "black"))
#  print(addLegend("topleft", on=1,
#          legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
#          lty=c(1, 1, 1), lwd=c(2, 2, 2),
#          col=c("black", "green","red")))
}
for(stockn in stocks$stockname){
myplot = plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green", main = stockn)
print(myplot)
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "black")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("black", "green","red"))
#  print(lines4(sqrt(allstocks[[stockn]]$RV), col = "red"))
#  print(lines(allstocks[[stockn]]$ret, col = "black"))
#  print(addLegend("topleft", on=1,
#          legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
#          lty=c(1, 1, 1), lwd=c(2, 2, 2),
#          col=c("black", "green","red")))
}
for(stockn in stocks$stockname){
myplot = plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green", main = stockn)
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "black")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("black", "green","red"))
print(myplot)
#  print(lines4(sqrt(allstocks[[stockn]]$RV), col = "red"))
#  print(lines(allstocks[[stockn]]$ret, col = "black"))
#  print(addLegend("topleft", on=1,
#          legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
#          lty=c(1, 1, 1), lwd=c(2, 2, 2),
#          col=c("black", "green","red")))
}
for(stockn in stocks$stockname){
myplot = plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green", main = stockn)
lines(RGARCH_fc_e[[stockn]],col = "violet")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "black")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH(1,1) forecast","Realized volatility","RGARCH forecast"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("black", "green","red", "violet"))
print(myplot)
#  print(lines4(sqrt(allstocks[[stockn]]$RV), col = "red"))
#  print(lines(allstocks[[stockn]]$ret, col = "black"))
#  print(addLegend("topleft", on=1,
#          legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
#          lty=c(1, 1, 1), lwd=c(2, 2, 2),
#          col=c("black", "green","red")))
}
for(stockn in stocks$stockname){
myplot = plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green", main = stockn)
lines(RGARCH_fc_e[[stockn]],col = "violet")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "grey")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH(1,1) forecast","Realized volatility","RGARCH forecast"),
lty=c(1, 1, 1), lwd=c(2, 2, 2),
col=c("grey", "green","red", "violet"))
print(myplot)
#  print(lines4(sqrt(allstocks[[stockn]]$RV), col = "red"))
#  print(lines(allstocks[[stockn]]$ret, col = "black"))
#  print(addLegend("topleft", on=1,
#          legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
#          lty=c(1, 1, 1), lwd=c(2, 2, 2),
#          col=c("black", "green","red")))
}
for(stockn in stocks$stockname){
myplot = plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.2, 0.2), col = "green", main = stockn)
lines(RGARCH_fc_e[[stockn]],col = "blue")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "grey")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH(1,1) forecast","Realized volatility","RGARCH forecast"),
lty=c(1, 1, 1, 1), lwd=c(2, 2, 2,2),
col=c("grey", "green","red", "blue"))
print(myplot)
#  print(lines4(sqrt(allstocks[[stockn]]$RV), col = "red"))
#  print(lines(allstocks[[stockn]]$ret, col = "black"))
#  print(addLegend("topleft", on=1,
#          legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
#          lty=c(1, 1, 1), lwd=c(2, 2, 2),
#          col=c("black", "green","red")))
}
for(stockn in stocks$stockname){
xmin = min(c(ARMAGARCH_fc_e[[stockn]], RGARCH_fc_e[[stockn]], sqrt(allstocks[[stockn]]$RV), allstocks[[stockn]]$ret))
xmax = max(c(ARMAGARCH_fc_e[[stockn]], RGARCH_fc_e[[stockn]], sqrt(allstocks[[stockn]]$RV), allstocks[[stockn]]$ret))
myplot = plot(ARMAGARCH_fc_e[[stockn]], ylim = c(xmin, xmax), col = "green", main = stockn)
lines(RGARCH_fc_e[[stockn]],col = "blue")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "grey")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH(1,1) forecast","Realized volatility","RGARCH forecast"),
lty=c(1, 1, 1, 1), lwd=c(2, 2, 2,2),
col=c("grey", "green","red", "blue"))
print(myplot)
#  print(lines4(sqrt(allstocks[[stockn]]$RV), col = "red"))
#  print(lines(allstocks[[stockn]]$ret, col = "black"))
#  print(addLegend("topleft", on=1,
#          legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
#          lty=c(1, 1, 1), lwd=c(2, 2, 2),
#          col=c("black", "green","red")))
}
xmax
max(c(ARMAGARCH_fc_e[[stockn]], RGARCH_fc_e[[stockn]], sqrt(allstocks[[stockn]]$RV), allstocks[[stockn]]$ret))
xmin
max(ARMAGARCH_fc_e[[stockn]])
for(stockn in stocks$stockname){
xmin = min(c(ARMAGARCH_fc_e[[stockn]], RGARCH_fc_e[[stockn]], sqrt(allstocks[[stockn]]$RV), allstocks[[stockn]]$ret))
xmax = max(c(ARMAGARCH_fc_e[[stockn]], RGARCH_fc_e[[stockn]], sqrt(allstocks[[stockn]]$RV), allstocks[[stockn]]$ret))
myplot = plot(ARMAGARCH_fc_e[[stockn]], ylim = c(xmin, xmax), col = "green", main = stockn)
lines(RGARCH_fc_e[[stockn]],col = "blue")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "grey")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH(1,1) forecast","Realized volatility","RGARCH forecast"),
lty=c(1, 1, 1, 1), lwd=c(2, 2, 2,2),
col=c("grey", "green","red", "blue"))
print(myplot)
#  print(lines4(sqrt(allstocks[[stockn]]$RV), col = "red"))
#  print(lines(allstocks[[stockn]]$ret, col = "black"))
#  print(addLegend("topleft", on=1,
#          legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
#          lty=c(1, 1, 1), lwd=c(2, 2, 2),
#          col=c("black", "green","red")))
}
max(ARMAGARCH_fc_e[[stockn]])
max(RGARCH_fc_e[[stockn]])
max(sqrt(allstocks[[stockn]]$RV))
max(allstocks[[stockn]]$ret))
max(allstocks[[stockn]]$ret)
allstocks[[stockn]]$ret
for(stockn in stocks$stockname){
xmin = min(c(ARMAGARCH_fc_e[[stockn]], RGARCH_fc_e[[stockn]], sqrt(allstocks[[stockn]]$RV), allstocks[[stockn]]$ret))
xmax = max(c(ARMAGARCH_fc_e[[stockn]], RGARCH_fc_e[[stockn]], sqrt(allstocks[[stockn]]$RV), allstocks[[stockn]]$ret))
myplot = plot(ARMAGARCH_fc_e[[stockn]], col = "green", main = stockn)
lines(RGARCH_fc_e[[stockn]],col = "blue")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "grey")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH(1,1) forecast","Realized volatility","RGARCH forecast"),
lty=c(1, 1, 1, 1), lwd=c(2, 2, 2,2),
col=c("grey", "green","red", "blue"))
print(myplot)
#  print(lines4(sqrt(allstocks[[stockn]]$RV), col = "red"))
#  print(lines(allstocks[[stockn]]$ret, col = "black"))
#  print(addLegend("topleft", on=1,
#          legend.names = c("Returns", "GARCH volatility forecast","Realized volatility"),
#          lty=c(1, 1, 1), lwd=c(2, 2, 2),
#          col=c("black", "green","red")))
}
for(stockn in stocks$stockname){
myplot = plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.1, 0.1), col = "green", main = stockn)
lines(RGARCH_fc_e[[stockn]],col = "blue")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "grey")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH(1,1) forecast","Realized volatility","RGARCH forecast"),
lty=c(1, 1, 1, 1), lwd=c(2, 2, 2,2),
col=c("grey", "green","red", "blue"))
print(myplot)
}
load("Data/allstocks.RData")
load("Data/stocks.RData")
load("Data/ARMAGARCH_fc_e.RData")
for(stockn in stocks$stockname){
myplot = plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.1, 0.1), col = "green", main = stockn)
lines(RGARCH_fc_e[[stockn]],col = "blue")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "grey")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH(1,1) forecast","Realized volatility","RGARCH forecast"),
lty=c(1, 1, 1, 1), lwd=c(2, 2, 2,2),
col=c("grey", "green","red", "blue"))
print(myplot)
}
load("Data/allstocks.RData")
load("Data/stocks.RData")
load("Data/ARMAGARCH_fc_e.RData")
load("Data/RGARCH_fc_e.RData")
for(stockn in stocks$stockname){
myplot = plot(ARMAGARCH_fc_e[[stockn]], ylim = c(-0.1, 0.1), col = "green", main = stockn)
lines(RGARCH_fc_e[[stockn]],col = "blue")
lines(sqrt(allstocks[[stockn]]$RV), col = "red")
lines(allstocks[[stockn]]$ret, col = "grey")
addLegend("topleft", on=1,
legend.names = c("Returns", "GARCH(1,1) forecast","Realized volatility","RGARCH forecast"),
lty=c(1, 1, 1, 1), lwd=c(2, 2, 2,2),
col=c("grey", "green","red", "blue"))
print(myplot)
}
